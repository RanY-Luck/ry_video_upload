# 独立视频去重工具使用说明

## 功能说明

这是一个独立的视频去重工具,专门用于处理 `Download/` 目录下的 MP4 视频文件。

### 主要特点

- ✅ **自动扫描**: 递归扫描 `Download/` 目录下所有 MP4 文件
- ✅ **智能去重**: 自动跳过已处理的视频文件
- ✅ **实时进度**: 单线程顺序处理,可看到 FFmpeg 实时输出
- ✅ **处理记录**: 自动记录已处理文件,避免重复处理
- ✅ **独立运行**: 不依赖下载功能,可单独使用

## 使用方法

### 方法一: 使用批处理文件 (推荐)

双击运行 `run_dedup.bat` 文件即可。

### 方法二: 命令行运行

```bash
python standalone_dedup.py
```

## 目录结构

```
video-mover/
├── Download/              # 源视频目录 (会递归扫描所有子目录)
│   └── *.mp4             # 待处理的 MP4 文件
├── Upload/
│   └── videos/           # 去重后的视频输出目录
├── Dedup/
│   ├── dedup.py          # 去重处理脚本
│   └── processed_videos.log  # 已处理文件记录
├── standalone_dedup.py   # 独立去重工具主程序
└── run_dedup.bat         # 快速启动脚本
```

## 工作流程

1. **扫描文件**: 递归扫描 `Download/` 目录下所有 MP4 文件
2. **检查记录**: 跳过已处理的文件 (记录在 `Dedup/processed_videos.log`)
3. **去重处理**: 调用 `Dedup/dedup.py` 对每个视频进行去重
4. **保存输出**: 处理后的视频保存到 `Upload/videos/` 目录
5. **记录日志**: 记录处理结果到日志文件

## 日志文件

- **运行日志**: `standalone_dedup.log` - 记录程序运行详情
- **处理记录**: `Dedup/processed_videos.log` - 记录已处理的文件路径

## 注意事项

1. 确保 `Dedup/dedup.py` 脚本存在且可执行
2. 首次运行会扫描所有未处理的 MP4 文件
3. 已处理的文件会被自动跳过,不会重复处理
4. 如需重新处理某个文件,请从 `Dedup/processed_videos.log` 中删除对应记录

## 处理方式

- 采用单线程顺序处理,确保输出清晰可读
- 可以实时看到 FFmpeg 的处理进度和日志
- 每个视频处理完成后显示详细统计信息

## 常见问题

### Q: 如何重新处理已处理过的视频?

A: 删除或编辑 `Dedup/processed_videos.log` 文件,移除对应的文件路径记录。

### Q: 处理失败的视频会怎样?

A: 失败的视频不会被记录到处理日志中,下次运行时会重新尝试处理。

### Q: 可以只处理特定子目录的视频吗?

A: 可以,将视频移动到 `Download/` 下的特定子目录即可,工具会递归扫描所有子目录。

## 技术支持

如有问题,请查看日志文件 `standalone_dedup.log` 获取详细错误信息。
