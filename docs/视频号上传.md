# 独立视频号上传工具使用说明

## 功能说明

这是一个独立的视频号上传工具,专门用于上传 `Upload/videos` 目录下已去重的视频到微信视频号。

### 主要特点

- ✅ **AI 智能分析**: 使用阿里百炼 AI 自动分析视频生成爆款标题和热门标签
- ✅ **自动上传**: 自动上传到微信视频号平台
- ✅ **实时进度**: 显示上传进度和详细日志
- ✅ **自动清理**: 上传成功后自动删除本地视频文件
- ✅ **独立运行**: 不依赖其他功能,可单独使用

## 前置准备

### 1. 获取阿里百炼 API Key

1. 访问 [阿里百炼控制台](https://bailian.console.aliyun.com/)
2. 注册并获取 API Key
3. 修改 `standalone_upload.py` 中的 `DASHSCOPE_API_KEY` 配置

### 2. 获取视频号 Cookie

首次使用需要获取视频号登录 Cookie:

```bash
cd Upload
python vx_cookie.py
```

按照提示扫码登录,Cookie 会自动保存到 `Upload/cookies/tencent_uploader/account.json`

## 使用方法

### 方法一: 使用批处理文件 (推荐)

双击运行 `run_upload.bat` 文件即可。

### 方法二: 命令行运行

```bash
python standalone_upload.py
```

## 目录结构

```
video-mover/
├── Upload/
│   ├── videos/              # 待上传的视频目录
│   │   └── *.mp4           # 已去重的视频文件
│   ├── cookies/
│   │   └── tencent_uploader/
│   │       └── account.json # 视频号账号 Cookie
│   └── uploader/           # 上传模块
├── standalone_upload.py    # 独立上传工具主程序
└── run_upload.bat          # 快速启动脚本
```

## 工作流程

1. **扫描视频**: 扫描 `Upload/videos/` 目录下所有 MP4 文件
2. **账号登录**: 使用保存的 Cookie 登录视频号
3. **AI 分析**: 使用阿里百炼 AI 分析视频,生成标题和标签
4. **上传视频**: 上传到微信视频号平台
5. **删除文件**: 上传成功后删除本地视频文件
6. **记录日志**: 记录上传结果到日志文件

## 配置说明

在 `standalone_upload.py` 中可以修改以下配置:

```python
class StandaloneUploadConfig:
    # AI API Key (必须配置)
    DASHSCOPE_API_KEY = "your-api-key-here"
    
    # 视频分类 (可选)
    CATEGORY = TencentZoneTypes.CUTE_PETS.value
    
    # 发布时间 (0=立即发布)
    PUBLISH_DATE = 0
    
    # 上传后是否删除视频
    DELETE_AFTER_UPLOAD = True
```

### 视频分类选项

在 `Upload/utils/constant.py` 中查看所有可用分类:

- `CUTE_PETS` - 萌宠
- `LIFE` - 生活
- `FOOD` - 美食
- `TRAVEL` - 旅游
- 等等...

## 日志文件

- **运行日志**: `standalone_upload.log` - 记录程序运行详情
- **上传日志**: `Upload/logs/` - 上传模块的详细日志

## AI 生成说明

AI 会分析视频内容,生成:

- **标题**: 吸引眼球的爆款标题 (包含 1-2 个表情符号)
- **标签**: 8 个以上的热门标签

如果 AI 分析失败,会使用视频文件名作为标题,并使用默认标签。

## 注意事项

1. **首次使用**: 必须先运行 `Upload/vx_cookie.py` 获取账号 Cookie
2. **API Key**: 必须配置有效的阿里百炼 API Key
3. **网络连接**: 需要稳定的网络连接
4. **视频格式**: 仅支持 MP4 格式
5. **自动删除**: 上传成功后会自动删除本地视频,请确认备份

## 常见问题

### Q: 如何关闭上传后自动删除?

A: 修改 `StandaloneUploadConfig` 中的 `DELETE_AFTER_UPLOAD = False`

### Q: Cookie 过期怎么办?

A: 重新运行 `Upload/vx_cookie.py` 获取新的 Cookie

### Q: AI 分析失败怎么办?

A: 检查 API Key 是否正确,网络是否正常。程序会使用默认标题和标签继续上传。

### Q: 可以自定义标题和标签吗?

A: 可以修改 `AIAnalyzer.analyze_video()` 方法中的 AI 提示词,或者直接返回自定义的标题和标签。

### Q: 上传失败的视频会怎样?

A: 上传失败的视频不会被删除,可以在下次运行时重新尝试上传。

## 技术支持

如有问题,请查看日志文件 `standalone_upload.log` 获取详细错误信息。

## 安全提示

- Cookie 文件包含敏感信息,请勿分享给他人
- API Key 请妥善保管,避免泄露
- 建议定期更换 Cookie 和 API Key
